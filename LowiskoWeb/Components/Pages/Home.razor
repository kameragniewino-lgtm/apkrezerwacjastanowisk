@page "/"
@using LowiskoWeb.Models
@using LowiskoWeb.Services
@using System.Net.Http.Json
@inject StanowiskaService Svc
@inject IJSRuntime JS
@inject IHttpClientFactory HttpFactory

<div class="page-wrap">
    <div class="panel-left">
        <div class="pogoda-home-box">
            @if (pogoda != null)
            {
                <div class="pogoda-home-now">
                    <div class="pogoda-home-ico">@PogodaIkona(pogoda.AktualnyKod)</div>
                    <div class="pogoda-home-info">
                        <div class="pogoda-home-temp">@pogoda.TemperaturaÂ°C</div>
                        <div class="pogoda-home-wiatr">ğŸ’¨ @pogoda.Wiatr km/h Â· Gniewino</div>
                    </div>
                </div>
                <div class="pogoda-home-dni">
                    @foreach (var d in pogoda.Dni)
                    {
                        <div class="pogoda-home-d">
                            <span class="pogoda-home-dn">@d.Dzien</span>
                            <span>@PogodaIkona(d.Kod)</span>
                            <span class="pogoda-home-mm">@d.MaxÂ°/@d.MinÂ°</span>
                        </div>
                    }
                </div>
            }
        </div>

        <div class="panel-top-btns">
            <button class="btn-moje" @onclick="() => pokazMoje = true">ğŸ“± Moje rezerwacje</button>
        </div>

        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-val">@wolne</div>
                <div class="stat-label">wolne dziÅ›</div>
            </div>
            <div class="stat-item">
                <div class="stat-val">@(Svc.Stanowiska.Count - wolne)</div>
                <div class="stat-label">zajÄ™te</div>
            </div>
            <div class="stat-item">
                <div class="stat-val">@Svc.Stanowiska.Count</div>
                <div class="stat-label">Å‚Ä…cznie</div>
            </div>
        </div>

        <div class="legenda">
            <span class="dot green"></span> Wolne
            <span class="dot yellow"></span> CzÄ™Å›ciowo
            <span class="dot red"></span> ZajÄ™te
        </div>

        @if (wybrane != null)
        {
            <div class="info-box">
                <h4>Stanowisko nr @wybrane.Numer</h4>
                @{
                    var statusDzis = wybrane.StatusDnia(wybranyDzien, Svc.DomyslnaGodzinaOd, Svc.DomyslnaGodzinaDo);
                    var rez = wybrane.RezerwacjaDnia(wybranyDzien);
                }
                @if (statusDzis == "pelne")
                {
                    <p class="status-zajete">ğŸ”´ ZAJÄ˜TE caÅ‚y dzieÅ„</p>
                    @if (rez != null)
                    {
                        <p>@rez.TypPobytu Â· @rez.DataOd.ToString("dd.MM") @rez.GodzinaOd.ToString("HH:mm") â†’ @rez.DataDo.ToString("dd.MM") @rez.GodzinaDo.ToString("HH:mm")</p>
                    }
                }
                else if (statusDzis == "dzien")
                {
                    <p class="status-czesciowe">â˜€ï¸ DzieÅ„ zajÄ™ty â€” ğŸŒ™ nocka wolna!</p>
                    <button class="btn-rezerwuj" @onclick='() => OtworzFormularzTyp("Nocka")'>ğŸŒ™ Zarezerwuj nockÄ™</button>
                }
                else if (statusDzis == "nocka")
                {
                    <p class="status-czesciowe">ğŸŒ™ Nocka zajÄ™ta â€” â˜€ï¸ dzieÅ„ wolny!</p>
                    <button class="btn-rezerwuj" @onclick='() => OtworzFormularzTyp("DzieÅ„")'>â˜€ï¸ Zarezerwuj dzieÅ„</button>
                }
                else
                {
                    <p class="status-wolne">ğŸŸ¢ WOLNE</p>
                    <button class="btn-rezerwuj" @onclick="OtworzFormularz">Zarezerwuj</button>
                }

                <div class="mini-kal">
                    <div class="mini-kal-nav">
                        <button class="mini-kal-btn" @onclick="PoprzedniMiesiac">â—€</button>
                        <div class="mini-kal-title">@kalMiesiac.ToString("MMMM yyyy")</div>
                        <button class="mini-kal-btn" @onclick="NastepnyMiesiac">â–¶</button>
                    </div>
                    <div class="mini-kal-header">
                        <div>Pn</div><div>Wt</div><div>Åšr</div><div>Cz</div><div>Pt</div><div>Sb</div><div>Nd</div>
                    </div>
                    <div class="mini-kal-grid">
                        @{
                            var pierwszy = new DateTime(kalMiesiac.Year, kalMiesiac.Month, 1);
                            int offset = ((int)pierwszy.DayOfWeek + 6) % 7;
                            int dniWMiesiacu = DateTime.DaysInMonth(kalMiesiac.Year, kalMiesiac.Month);
                        }
                        @for (int i = 0; i < offset; i++)
                        {
                            <div class="mini-kal-day empty"></div>
                        }
                        @for (int d = 1; d <= dniWMiesiacu; d++)
                        {
                            var dzien = new DateTime(kalMiesiac.Year, kalMiesiac.Month, d);
                            var st = wybrane.StatusDnia(dzien, Svc.DomyslnaGodzinaOd, Svc.DomyslnaGodzinaDo);
                            bool dzisiaj = dzien == DateTime.Today;
                            bool wybrany = dzien.Date == wybranyDzien.Date;
                            bool przeszly = dzien < DateTime.Today;
                            <div class="mini-kal-day kal-@st @(dzisiaj ? "today" : "") @(wybrany ? "picked" : "") @(przeszly ? "past" : "")"
                                 @onclick="() => KliknijDzien(dzien)"
                                 title="@st">
                                @d
                                @if (st == "dzien") { <span class="kal-icon">â˜€ï¸</span> }
                                @if (st == "nocka") { <span class="kal-icon">ğŸŒ™</span> }
                            </div>
                        }
                    </div>
                    <div class="mini-kal-legend">
                        <div class="mini-kal-leg-item"><div class="dot green"></div> Wolne</div>
                        <div class="mini-kal-leg-item">â˜€ï¸ DzieÅ„ zajÄ™ty</div>
                        <div class="mini-kal-leg-item">ğŸŒ™ Noc zajÄ™ta</div>
                        <div class="mini-kal-leg-item"><div class="dot red"></div> PeÅ‚ne</div>
                    </div>
                    <p class="mini-kal-hint">Kliknij dzieÅ„ aby zarezerwowaÄ‡</p>
                </div>
            </div>
        }
        else
        {
            <p class="hint">Kliknij stanowisko na mapie</p>
        }
    </div>

    <div class="mapa-scroll">
        <div class="mapa-wrap">
            <img src="images/mapa.png" class="mapa-img" draggable="false" />
            @foreach (var st in Svc.Stanowiska)
            {
                var stStatus = st.StatusDnia(wybranyDzien, Svc.DomyslnaGodzinaOd, Svc.DomyslnaGodzinaDo);
                bool selected = st == wybrane;
                <div class="spot spot-@stStatus @(selected ? "selected" : "")"
                     style="left:@(st.X.ToString("0.0", System.Globalization.CultureInfo.InvariantCulture))%;top:@(st.Y.ToString("0.0", System.Globalization.CultureInfo.InvariantCulture))%"
                     @onclick="() => Kliknij(st)">
                    @st.Numer
                </div>
            }
        </div>
    </div>
</div>

@if (pokazFormularz)
{
    <div class="modal-bg" @onclick="ZamknijFormularz">
        <div class="modal" @onclick:stopPropagation="true">
            <h3>Rezerwacja stanowiska nr @wybrane!.Numer</h3>
            <label>ImiÄ™ i nazwisko:</label>
            <input @bind="frmNazwa" @bind:event="oninput" placeholder="Jan Kowalski" />
            <label>Telefon:</label>
            <input @bind="frmTelefon" @bind:event="oninput" placeholder="123 456 789" />

            <label>Typ pobytu:</label>
            <div class="typ-btns">
                <button class="typ-btn @(frmTyp == "DzieÅ„" ? "active" : "")" @onclick='() => WybierzTyp("DzieÅ„")'>â˜€ï¸ DzieÅ„</button>
                <button class="typ-btn @(frmTyp == "Nocka" ? "active" : "")" @onclick='() => WybierzTyp("Nocka")'>ğŸŒ™ Nocka</button>
                <button class="typ-btn @(frmTyp == "Doba" ? "active" : "")" @onclick='() => WybierzTyp("Doba")'>ğŸ”„ Doba</button>
            </div>

            <div class="form-row">
                <div class="form-col">
                    <label>Od:</label>
                    <input type="date" @bind="frmOd" @bind:after="PrzeliczCene" />
                </div>
                <div class="form-col">
                    <label>Do:</label>
                    <input type="date" @bind="frmDo" @bind:after="PrzeliczCene" />
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <label>Godz. przyjazdu:</label>
                    <input type="time" @bind="frmGodzOd" @bind:after="PrzeliczCene" />
                </div>
                <div class="form-col">
                    <label>Godz. wyjazdu:</label>
                    <input type="time" @bind="frmGodzDo" @bind:after="PrzeliczCene" />
                </div>
            </div>

            <div class="form-row">
                <div class="form-col">
                    <label>ÅowiÄ…cych:</label>
                    <select @bind="frmIloscLowiacych" @bind:after="PrzeliczCene">
                        @for (int i = 1; i <= 5; i++)
                        {
                            <option value="@i">@i</option>
                        }
                    </select>
                </div>
                <div class="form-col">
                    <label>WÄ™dek (@Svc.WedkiWCenie w cenie):</label>
                    <select @bind="frmIloscWedek" @bind:after="PrzeliczCene">
                        @for (int i = 1; i <= 8; i++)
                        {
                            <option value="@i">@i @(i > Svc.WedkiWCenie ? $"(+{(i - Svc.WedkiWCenie) * Svc.CenaDodatkowaWedka}zÅ‚)" : "")</option>
                        }
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <label>Osoba towarzyszÄ…ca:</label>
                    <label class="toggle-label">
                        <input type="checkbox" @bind="frmOsobaTow" @bind:after="PrzeliczCene" />
                        <span>@(frmOsobaTow ? "Tak" : "Nie")</span>
                    </label>
                </div>
            </div>

            <div class="cena-box">
                ğŸ’° Cena: <strong>@frmCena.ToString("0.00") zÅ‚</strong>
                <div class="cena-szczegoly">
                    @frmTyp @((frmDo.Date - frmOd.Date).Days + 1) dzieÅ„/dni Ã— @CenaBazowa().ToString("0")zÅ‚
                    @if (frmIloscLowiacych > 1) { <span>+ @(frmIloscLowiacych-1) dod. Å‚owiÄ…cy</span> }
                    @if (frmIloscWedek > Svc.WedkiWCenie) { <span>+ @(frmIloscWedek - Svc.WedkiWCenie) dod. wÄ™dek</span> }
                    @if (frmOsobaTow) { <span>+ osoba tow.</span> }
                </div>
            </div>
            @if (!string.IsNullOrWhiteSpace(bladRez))
            {
                <p class="error">@bladRez</p>
            }
            <div class="regulamin-check">
                <label class="toggle-label">
                    <input type="checkbox" @bind="frmRegulamin" />
                    <span>AkceptujÄ™ <a href="/regulamin" target="_blank">regulamin Å‚owiska</a></span>
                </label>
            </div>
            <div class="modal-btns">
                <button class="btn-rezerwuj" @onclick="Zarezerwuj" disabled="@(!frmRegulamin)">âœ… Zarezerwuj</button>
                <button class="btn-cancel" @onclick="ZamknijFormularz">Anuluj</button>
            </div>
        </div>
    </div>
}

@if (pokazPotwierdzenie && ostatniaRez != null)
{
    <div class="modal-bg" @onclick="() => pokazPotwierdzenie = false">
        <div class="modal potw-modal" @onclick:stopPropagation="true">
            <div class="potw-header">âœ… Rezerwacja potwierdzona!</div>
            <div class="potw-kod">Kod: <strong>REZ-@ostatniaRez.Id.ToString("D4")</strong></div>
            <div class="potw-details">
                <div class="potw-row">ğŸ£ <strong>@ostatniaRez.Wedkarz</strong></div>
                <div class="potw-row">ğŸ“ Stanowisko nr <strong>@ostatniaRez.StanowiskoNumer</strong></div>
                <div class="potw-row">ğŸ“… @ostatniaRez.TypPobytu Â· @ostatniaRez.DataOd.ToString("dd.MM.yyyy") @(ostatniaRez.DataOd != ostatniaRez.DataDo ? $"â€“ {ostatniaRez.DataDo:dd.MM.yyyy}" : "")</div>
                <div class="potw-row">ğŸ• @ostatniaRez.GodzinaOd.ToString("HH:mm") â†’ @ostatniaRez.GodzinaDo.ToString("HH:mm")</div>
                <div class="potw-row">ğŸ£ @ostatniaRez.IloscWedek wÄ™dek Â· @ostatniaRez.IloscLowiacych Å‚owiÄ…cych @(ostatniaRez.OsobaTowarzyszaca ? "Â· +osoba tow." : "")</div>
                <div class="potw-row potw-cena">ğŸ’° @ostatniaRez.Cena.ToString("0.00") zÅ‚</div>
            </div>
            <p class="potw-hint">ğŸ“¸ ZrÃ³b zrzut ekranu lub wydrukuj potwierdzenie</p>
            <div class="modal-btns">
                <button class="btn-rezerwuj" @onclick="DrukujPotwierdzenie">ğŸ–¨ï¸ Drukuj</button>
                <button class="btn-cancel" @onclick="() => pokazPotwierdzenie = false">Zamknij</button>
            </div>
        </div>
    </div>
}

@if (pokazMoje)
{
    <div class="modal-bg" @onclick="() => pokazMoje = false">
        <div class="modal moje-modal" @onclick:stopPropagation="true">
            <h3>ğŸ“± Moje rezerwacje</h3>
            <label>Podaj numer telefonu:</label>
            <input @bind="mojTelefon" @bind:event="oninput" placeholder="123 456 789" />
            <button class="btn-rezerwuj" style="margin-top:8px" @onclick="SzukajMoich">ğŸ” Szukaj</button>

            @if (mojeRezerwacje != null)
            {
                @if (mojeRezerwacje.Count == 0)
                {
                    <p class="hint" style="margin-top:12px">Brak rezerwacji dla tego numeru.</p>
                }
                else
                {
                    <div class="moje-lista">
                        @foreach (var r in mojeRezerwacje.OrderBy(r => r.DataOd))
                        {
                            bool aktywna = r.DataDo >= DateTime.Today;
                            <div class="moje-karta @(aktywna ? "" : "nieaktywna")">
                                <div class="moje-kod">REZ-@r.Id.ToString("D4")</div>
                                <div>ğŸ“ Stanowisko <strong>@r.StanowiskoNumer</strong> Â· @r.TypPobytu</div>
                                <div>ğŸ“… @r.DataOd.ToString("dd.MM") â†’ @r.DataDo.ToString("dd.MM") Â· @r.GodzinaOd.ToString("HH:mm")â€“@r.GodzinaDo.ToString("HH:mm")</div>
                                <div>ğŸ’° <strong>@r.Cena.ToString("0.00") zÅ‚</strong></div>
                            </div>
                        }
                    </div>
                }
            }
            <button class="btn-cancel" style="margin-top:10px" @onclick="() => pokazMoje = false">Zamknij</button>
        </div>
    </div>
}

@code {
    private DateTime wybranyDzien = DateTime.Today;
    private Stanowisko? wybrane;
    private int wolne => Svc.Stanowiska.Count(s => s.StatusDnia(wybranyDzien, Svc.DomyslnaGodzinaOd, Svc.DomyslnaGodzinaDo) == "wolne");

    private bool pokazFormularz;
    private string frmNazwa = "";
    private string frmTelefon = "";
    private string frmTyp = "DzieÅ„";
    private DateTime frmOd;
    private DateTime frmDo;
    private TimeOnly frmGodzOd;
    private TimeOnly frmGodzDo;
    private int frmIloscLowiacych = 1;
    private int frmIloscWedek = 2;
    private bool frmOsobaTow;
    private decimal frmCena;
    private string? bladRez;

    // Potwierdzenie
    private bool pokazPotwierdzenie;
    private Rezerwacja? ostatniaRez;

    // Moje rezerwacje
    private bool pokazMoje;
    private string mojTelefon = "";
    private List<Rezerwacja>? mojeRezerwacje;

    // Regulamin
    private bool frmRegulamin;

    private void Kliknij(Stanowisko st)
    {
        wybrane = st;
        kalMiesiac = new DateTime(wybranyDzien.Year, wybranyDzien.Month, 1, 0, 0, 0);
    }

    // Mini kalendarz
    private DateTime kalMiesiac = new(DateTime.Today.Year, DateTime.Today.Month, 1);
    private void PoprzedniMiesiac() => kalMiesiac = kalMiesiac.AddMonths(-1);
    private void NastepnyMiesiac() => kalMiesiac = kalMiesiac.AddMonths(1);

    private void KliknijDzien(DateTime dzien)
    {
        if (dzien < DateTime.Today) return;

        wybranyDzien = dzien;

        if (wybrane == null) return;

        var status = wybrane.StatusDnia(dzien, Svc.DomyslnaGodzinaOd, Svc.DomyslnaGodzinaDo);
        switch (status)
        {
            case "wolne":
                OtworzFormularz();
                break;
            case "dzien":
                OtworzFormularzTyp("Nocka");
                break;
            case "nocka":
                OtworzFormularzTyp("DzieÅ„");
                break;
        }
    }

    private void OtworzFormularz()
    {
        OtworzFormularzTyp("DzieÅ„");
    }

    private void OtworzFormularzTyp(string typ)
    {
        frmNazwa = "";
        frmTelefon = "";
        frmOd = wybranyDzien;
        frmDo = wybranyDzien;
        frmIloscLowiacych = 1;
        frmIloscWedek = Svc.WedkiWCenie;
        frmOsobaTow = false;
        frmRegulamin = false;
        bladRez = null;
        WybierzTyp(typ);
        pokazFormularz = true;
    }

    private void WybierzTyp(string typ)
    {
        frmTyp = typ;
        switch (typ)
        {
            case "DzieÅ„":
                frmGodzOd = Svc.DomyslnaGodzinaOd;
                frmGodzDo = Svc.DomyslnaGodzinaDo;
                break;
            case "Nocka":
                frmGodzOd = Svc.DomyslnaGodzinaDo;
                frmGodzDo = Svc.DomyslnaGodzinaOd;
                break;
            case "Doba":
                frmGodzOd = Svc.DomyslnaGodzinaOd;
                frmGodzDo = Svc.DomyslnaGodzinaOd;
                break;
        }
        PrzeliczCene();
    }

    private decimal CenaBazowa() => frmTyp switch
    {
        "Nocka" => Svc.CenaNocna,
        "Doba" => Svc.CenaDoba,
        _ => Svc.CenaDobowa
    };

    private void PrzeliczCene()
    {
        var od = frmOd <= frmDo ? frmOd : frmDo;
        var doo = frmOd <= frmDo ? frmDo : frmOd;
        frmCena = Svc.ObliczCene(frmTyp, od, doo, frmIloscLowiacych, frmIloscWedek, frmOsobaTow);
    }

    private void ZamknijFormularz() => pokazFormularz = false;

    private void SzukajMoich()
    {
        var tel = mojTelefon.Trim().Replace(" ", "");
        if (tel.Length < 3) { mojeRezerwacje = null; return; }
        mojeRezerwacje = Svc.WszystkieRezerwacje()
            .Where(r => r.Telefon != null && r.Telefon.Replace(" ", "").Contains(tel))
            .ToList();
    }

    private async Task DrukujPotwierdzenie()
    {
        await JS.InvokeVoidAsync("window.print");
    }

    private void Zarezerwuj()
    {
        bladRez = null;

        if (string.IsNullOrWhiteSpace(frmNazwa))
        {
            bladRez = "Wpisz imiÄ™ i nazwisko!";
            return;
        }

        if (wybrane == null) return;

        if (frmDo < frmOd) frmDo = frmOd;

        var poczatek = frmOd.Date + frmGodzOd.ToTimeSpan();
        var koniec = frmDo.Date + frmGodzDo.ToTimeSpan();

        // Nocka/Doba â€” godzina koÅ„ca <= startu = koniec nastÄ™pnego dnia
        if (frmGodzDo <= frmGodzOd)
            koniec = koniec.AddDays(1);

        if (koniec <= poczatek)
        {
            bladRez = "Godzina wyjazdu musi byÄ‡ po godzinie przyjazdu!";
            return;
        }

        if (wybrane.CzyZajete(poczatek, koniec))
        {
            bladRez = "To stanowisko jest juÅ¼ zajÄ™te w tym terminie!";
            return;
        }

        var nowaRez = new Rezerwacja
        {
            StanowiskoNumer = wybrane.Numer,
            Wedkarz = frmNazwa.Trim(),
            Telefon = frmTelefon.Trim(),
            TypPobytu = frmTyp,
            DataOd = frmOd,
            DataDo = frmDo,
            GodzinaOd = frmGodzOd,
            GodzinaDo = frmGodzDo,
            IloscLowiacych = frmIloscLowiacych,
            IloscWedek = frmIloscWedek,
            OsobaTowarzyszaca = frmOsobaTow,
            Cena = frmCena
        };
        Svc.Rezerwuj(nowaRez);
        ostatniaRez = nowaRez;
        pokazFormularz = false;
        pokazPotwierdzenie = true;
    }

    // === POGODA ===
    private PogodaDane? pogoda;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await ZaladujPogode();
        }
    }

    private async Task ZaladujPogode()
    {
        try
        {
            var http = HttpFactory.CreateClient();
            var resp = await http.GetFromJsonAsync<PogodaResponse>(
                "https://api.open-meteo.com/v1/forecast?latitude=54.6122&longitude=18.0823&current=temperature_2m,weathercode,windspeed_10m&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=Europe/Warsaw&forecast_days=4");
            if (resp?.current != null && resp.daily != null)
            {
                var dniNazwy = new[] { "Nd", "Pn", "Wt", "Sr", "Cz", "Pt", "Sb" };
                var dane = new PogodaDane
                {
                    Temperatura = (int)Math.Round(resp.current.temperature_2m),
                    AktualnyKod = resp.current.weathercode,
                    Wiatr = (int)Math.Round(resp.current.windspeed_10m),
                    Dni = []
                };
                for (int i = 0; i < resp.daily.time.Length && i < 4; i++)
                {
                    var dt = DateTime.Parse(resp.daily.time[i]);
                    dane.Dni.Add(new PogodaDzien
                    {
                        Dzien = dniNazwy[(int)dt.DayOfWeek],
                        Kod = resp.daily.weathercode[i],
                        Max = (int)Math.Round(resp.daily.temperature_2m_max[i]),
                        Min = (int)Math.Round(resp.daily.temperature_2m_min[i])
                    });
                }
                pogoda = dane;
                await InvokeAsync(StateHasChanged);
            }
        }
        catch { }
    }

    private static string PogodaIkona(int kod) => kod switch
    {
        0 => "â˜€ï¸", 1 => "ğŸŒ¤ï¸", 2 => "â›…", 3 => "â˜ï¸",
        45 or 48 => "ğŸŒ«ï¸",
        51 or 53 or 55 or 80 => "ğŸŒ¦ï¸",
        61 or 63 or 65 or 81 or 82 => "ğŸŒ§ï¸",
        71 or 73 or 75 => "ğŸŒ¨ï¸",
        95 or 96 or 99 => "â›ˆï¸",
        _ => "ğŸŒ¡ï¸"
    };

    private class PogodaDane
    {
        public int Temperatura { get; set; }
        public int AktualnyKod { get; set; }
        public int Wiatr { get; set; }
        public List<PogodaDzien> Dni { get; set; } = [];
    }

    private class PogodaDzien
    {
        public string Dzien { get; set; } = "";
        public int Kod { get; set; }
        public int Max { get; set; }
        public int Min { get; set; }
    }

    private class PogodaResponse
    {
        public PogodaCurrent? current { get; set; }
        public PogodaDaily? daily { get; set; }
    }

    private class PogodaCurrent
    {
        public double temperature_2m { get; set; }
        public int weathercode { get; set; }
        public double windspeed_10m { get; set; }
    }

    private class PogodaDaily
    {
        public string[] time { get; set; } = [];
        public double[] temperature_2m_max { get; set; } = [];
        public double[] temperature_2m_min { get; set; } = [];
        public int[] weathercode { get; set; } = [];
    }
}
